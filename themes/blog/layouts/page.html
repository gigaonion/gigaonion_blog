{{ define "main" }}
  <h1>{{ .Title }}</h1>
<div class="post-meta">
  <div class="taxonomies-wrapper">
    {{ partial "terms.html" (dict "taxonomy" "categories" "page" .) }}
    {{ partial "terms.html" (dict "taxonomy" "tags" "page" .) }}
  </div>
  <div class="post-dates">
    <time datetime="{{ .Date.Format "2006-01-02T15:04:05-07:00" }}">公開日: {{ .Date.Format "2006年01月02日 (Mon)" }}</time>
    {{ if .Lastmod.After .Date }}
      <br>
      <time datetime="{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" }}">更新日: {{ .Lastmod.Format "2006年01月02日 (Mon)" }}</time>
    {{ end }}
  </div>
</div>

<article>
      {{/* Blackfriday で目次を自動表示する */}}
      <nav id="TableOfContents">
        <h3>目次</h3>
        {{- .TableOfContents -}}
      </nav>
    {{ .Content }}
  </article>
  <section id="comments-section" class="post-entry" data-post-slug="{{ .Slug | default .File.BaseFileName }}">
    <h3>コメント</h3>
    <div id="comments-list">
      <p>コメントを読み込んでいます...</p>
    </div>
    <form id="comment-form">
      <h4>
        コメントを投稿する
        <span id="reply-to-indicator" style="display: none;"></span>
      </h4>
      <input type="hidden" id="comment-parent-id" name="parent_id">
      <div class="form-group">
        <label for="author">お名前</label>
        <input type="text" id="author" name="author" required>
      </div>
      <div class="form-group">
        <label for="body">コメント</label>
        <textarea id="body" name="body" rows="4" required></textarea>
      </div>
      <div class="honeypot-field" aria-hidden="true">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" tabindex="-1" autocomplete="off">
      </div>
      <button type="submit" id="submit-comment">送信</button>
      <button type="button" id="cancel-reply" style="display: none;">返信をキャンセル</button>
      <p id="comment-status"></p>
    </form>
  </section>
{{ if .Parent }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement":
  [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "ホーム",
      "item": "{{ .Site.BaseURL }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ .Parent.Title }}",
      "item": "{{ .Parent.Permalink }}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ .Title }}",
      "item": "{{ .Permalink }}"
    }
  ]
}
</script>
{{ end }}
  {{ partial "share-buttons.html" . }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ .Title }}",
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05-07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" }}",
  "author": {
    "@type": "Person",
    "name": "{{ site.Params.author | default "GigaOnion" }}"
  },
  "publisher": {
      "@type": "Organization",
      "name": "{{ site.Title }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ "logo.png" | absURL }}"
      }
  },
  "description": "{{ .Description | default (.Summary | plainify | truncate 200) }}",
{{- with .Params.image -}}
"image": {
  "@type": "ImageObject",
  "url": "{{ . | absURL }}"
},
{{- end -}}
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  }
}
</script>
{{ end }}
